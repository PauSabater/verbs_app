'use client'

import { Fragment, useEffect, useState } from 'react'
import { Button } from '../Button/Button'
import SearchBar from '../SearchBar/SearchBar'
import styles from './header.module.scss'
import ModalExercises from '../ModalExercises/ModalExercises'
import SignUp from '../Logging/SignUp/SignUp'
import Link from 'next/link'
import { Sidebar } from './Sidebar/Sidebar'
import Logging from '../Logging/Logging'
import { fontTitles } from '@/app/fonts'

export default function Header() {

    const [isSignUpOpen, setIsSignUpOpen] = useState(false)
    const [isSidebarOpen, setIsSidebarOpen] = useState(true)

    const isLoggedVal = window.localStorage.getItem('is-logged')
    const isUserLogged = isLoggedVal === 'true'

    const closeModal = ()=> {
        setIsSignUpOpen(false)
    }

    const toggleSideBar = ()=> {
        setIsSidebarOpen(!isSidebarOpen)
    }

    return (
        <Fragment>
            <nav className={styles.header}>
                <div className={styles.background}></div>
                <div className={styles.burgerContainer} onClick={() => toggleSideBar()}>
                    <svg viewBox="0 0 44 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M41.5 2H2.5" stroke="currentColor" strokeWidth="2" strokeLinecap="round" />
                        <path d="M42 15H3" stroke="currentColor" strokeWidth="2" strokeLinecap="round" />
                        <path d="M41.5 28H2.5" stroke="currentColor" strokeWidth="2" strokeLinecap="round" />
                    </svg>
                </div>
                <div className={styles.logoContainer}>
                    <Link href={'/'}>
                        <svg width="128" height="38" viewBox="0 0 128 38" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M6.665 26.5L6.84 18.555L14.575 11.03H22.45L13.875 19.885L10.48 22.615L6.665 26.5ZM1.135 30V4.03H7.785V30H1.135ZM15.065 30L9.255 22.72L13.385 17.61L23.115 30H15.065ZM33.8288 30.315C31.7522 30.315 29.9088 29.895 28.2988 29.055C26.6888 28.215 25.4172 27.06 24.4838 25.59C23.5738 24.0967 23.1188 22.3933 23.1188 20.48C23.1188 18.5667 23.5738 16.875 24.4838 15.405C25.4172 13.935 26.6888 12.7917 28.2988 11.975C29.9088 11.135 31.7522 10.715 33.8288 10.715C35.9055 10.715 37.7488 11.135 39.3588 11.975C40.9922 12.7917 42.2638 13.935 43.1738 15.405C44.0838 16.875 44.5388 18.5667 44.5388 20.48C44.5388 22.3933 44.0838 24.0967 43.1738 25.59C42.2638 27.06 40.9922 28.215 39.3588 29.055C37.7488 29.895 35.9055 30.315 33.8288 30.315ZM33.8288 25.03C34.5988 25.03 35.2755 24.855 35.8588 24.505C36.4655 24.155 36.9438 23.6417 37.2938 22.965C37.6438 22.265 37.8188 21.4367 37.8188 20.48C37.8188 19.5233 37.6438 18.7183 37.2938 18.065C36.9438 17.3883 36.4655 16.875 35.8588 16.525C35.2755 16.175 34.5988 16 33.8288 16C33.0822 16 32.4055 16.175 31.7988 16.525C31.2155 16.875 30.7372 17.3883 30.3638 18.065C30.0138 18.7183 29.8388 19.5233 29.8388 20.48C29.8388 21.4367 30.0138 22.265 30.3638 22.965C30.7372 23.6417 31.2155 24.155 31.7988 24.505C32.4055 24.855 33.0822 25.03 33.8288 25.03ZM59.9744 10.715C61.4444 10.715 62.7744 11.0183 63.9644 11.625C65.1544 12.2083 66.0877 13.1183 66.7644 14.355C67.4644 15.5917 67.8144 17.19 67.8144 19.15V30H61.1644V20.235C61.1644 18.8817 60.8844 17.9017 60.3244 17.295C59.7877 16.665 59.0294 16.35 58.0494 16.35C57.3494 16.35 56.7077 16.5133 56.1244 16.84C55.541 17.1433 55.086 17.6217 54.7594 18.275C54.4327 18.9283 54.2694 19.78 54.2694 20.83V30H47.6194V11.03H53.9544V16.42L52.7294 14.845C53.4527 13.4683 54.4444 12.4417 55.7044 11.765C56.9644 11.065 58.3877 10.715 59.9744 10.715ZM71.1845 37.105C70.2978 37.105 69.4578 37.0117 68.6645 36.825C67.8478 36.6617 67.1478 36.4283 66.5645 36.125L68.2445 31.4C68.8512 31.7733 69.5395 31.96 70.3095 31.96C70.8928 31.96 71.3595 31.7617 71.7095 31.365C72.0828 30.9683 72.2695 30.3383 72.2695 29.475V11.03H78.9195V29.51C78.9195 31.82 78.2428 33.6633 76.8895 35.04C75.5362 36.4167 73.6345 37.105 71.1845 37.105ZM75.5945 8.93C74.3812 8.93 73.4012 8.59166 72.6545 7.915C71.9078 7.23833 71.5345 6.39833 71.5345 5.395C71.5345 4.39167 71.9078 3.55167 72.6545 2.875C73.4012 2.19833 74.3812 1.86 75.5945 1.86C76.8078 1.86 77.7878 2.18667 78.5345 2.84C79.2812 3.47 79.6545 4.28667 79.6545 5.29C79.6545 6.34 79.2812 7.215 78.5345 7.915C77.8112 8.59166 76.8312 8.93 75.5945 8.93ZM91.1804 30.315C89.6404 30.315 88.2521 30.0117 87.0154 29.405C85.8021 28.7983 84.8454 27.8533 84.1454 26.57C83.4688 25.2633 83.1304 23.6183 83.1304 21.635V11.03H89.7804V20.55C89.7804 22.02 90.0488 23.07 90.5854 23.7C91.1454 24.33 91.9271 24.645 92.9304 24.645C93.5838 24.645 94.1788 24.4933 94.7154 24.19C95.2521 23.8867 95.6838 23.4083 96.0104 22.755C96.3371 22.0783 96.5004 21.215 96.5004 20.165V11.03H103.15V30H96.8154V24.645L98.0404 26.15C97.3871 27.55 96.4421 28.6 95.2054 29.3C93.9688 29.9767 92.6271 30.315 91.1804 30.315ZM116.709 37.105C114.889 37.105 113.15 36.895 111.494 36.475C109.86 36.055 108.46 35.4367 107.294 34.62L109.709 29.965C110.502 30.595 111.482 31.085 112.649 31.435C113.839 31.8083 114.994 31.995 116.114 31.995C117.91 31.995 119.205 31.5983 119.999 30.805C120.792 30.035 121.189 28.9033 121.189 27.41V25.17L121.539 19.85L121.504 14.495V11.03H127.839V26.535C127.839 30.1283 126.87 32.7883 124.934 34.515C122.997 36.2417 120.255 37.105 116.709 37.105ZM115.554 29.02C113.874 29.02 112.322 28.6467 110.899 27.9C109.499 27.13 108.367 26.0683 107.504 24.715C106.664 23.3383 106.244 21.7167 106.244 19.85C106.244 17.9833 106.664 16.3733 107.504 15.02C108.367 13.6433 109.499 12.5817 110.899 11.835C112.322 11.0883 113.874 10.715 115.554 10.715C117.164 10.715 118.54 11.0417 119.684 11.695C120.827 12.325 121.69 13.3167 122.274 14.67C122.88 16.0233 123.184 17.75 123.184 19.85C123.184 21.95 122.88 23.6767 122.274 25.03C121.69 26.3833 120.827 27.3867 119.684 28.04C118.54 28.6933 117.164 29.02 115.554 29.02ZM117.129 23.735C117.922 23.735 118.622 23.5717 119.229 23.245C119.859 22.9183 120.349 22.4633 120.699 21.88C121.072 21.2967 121.259 20.62 121.259 19.85C121.259 19.08 121.072 18.4033 120.699 17.82C120.349 17.2367 119.859 16.7933 119.229 16.49C118.622 16.1633 117.922 16 117.129 16C116.335 16 115.624 16.1633 114.994 16.49C114.364 16.7933 113.862 17.2367 113.489 17.82C113.139 18.4033 112.964 19.08 112.964 19.85C112.964 20.62 113.139 21.2967 113.489 21.88C113.862 22.4633 114.364 22.9183 114.994 23.245C115.624 23.5717 116.335 23.735 117.129 23.735Z"
                                fill="#580DD9"
                                fillOpacity="0.7"
                            />
                            <path
                                d="M5.665 25.5L5.84 17.555L13.575 10.03H21.45L12.875 18.885L9.48 21.615L5.665 25.5ZM0.135 29V3.03H6.785V29H0.135ZM14.065 29L8.255 21.72L12.385 16.61L22.115 29H14.065ZM32.8288 29.315C30.7522 29.315 28.9088 28.895 27.2988 28.055C25.6888 27.215 24.4172 26.06 23.4838 24.59C22.5738 23.0967 22.1188 21.3933 22.1188 19.48C22.1188 17.5667 22.5738 15.875 23.4838 14.405C24.4172 12.935 25.6888 11.7917 27.2988 10.975C28.9088 10.135 30.7522 9.715 32.8288 9.715C34.9055 9.715 36.7488 10.135 38.3588 10.975C39.9922 11.7917 41.2638 12.935 42.1738 14.405C43.0838 15.875 43.5388 17.5667 43.5388 19.48C43.5388 21.3933 43.0838 23.0967 42.1738 24.59C41.2638 26.06 39.9922 27.215 38.3588 28.055C36.7488 28.895 34.9055 29.315 32.8288 29.315ZM32.8288 24.03C33.5988 24.03 34.2755 23.855 34.8588 23.505C35.4655 23.155 35.9438 22.6417 36.2938 21.965C36.6438 21.265 36.8188 20.4367 36.8188 19.48C36.8188 18.5233 36.6438 17.7183 36.2938 17.065C35.9438 16.3883 35.4655 15.875 34.8588 15.525C34.2755 15.175 33.5988 15 32.8288 15C32.0822 15 31.4055 15.175 30.7988 15.525C30.2155 15.875 29.7372 16.3883 29.3638 17.065C29.0138 17.7183 28.8388 18.5233 28.8388 19.48C28.8388 20.4367 29.0138 21.265 29.3638 21.965C29.7372 22.6417 30.2155 23.155 30.7988 23.505C31.4055 23.855 32.0822 24.03 32.8288 24.03ZM58.9744 9.715C60.4444 9.715 61.7744 10.0183 62.9644 10.625C64.1544 11.2083 65.0877 12.1183 65.7644 13.355C66.4644 14.5917 66.8144 16.19 66.8144 18.15V29H60.1644V19.235C60.1644 17.8817 59.8844 16.9017 59.3244 16.295C58.7877 15.665 58.0294 15.35 57.0494 15.35C56.3494 15.35 55.7077 15.5133 55.1244 15.84C54.541 16.1433 54.086 16.6217 53.7594 17.275C53.4327 17.9283 53.2694 18.78 53.2694 19.83V29H46.6194V10.03H52.9544V15.42L51.7294 13.845C52.4527 12.4683 53.4444 11.4417 54.7044 10.765C55.9644 10.065 57.3877 9.715 58.9744 9.715ZM70.1845 36.105C69.2978 36.105 68.4578 36.0117 67.6645 35.825C66.8478 35.6617 66.1478 35.4283 65.5645 35.125L67.2445 30.4C67.8512 30.7733 68.5395 30.96 69.3095 30.96C69.8928 30.96 70.3595 30.7617 70.7095 30.365C71.0828 29.9683 71.2695 29.3383 71.2695 28.475V10.03H77.9195V28.51C77.9195 30.82 77.2428 32.6633 75.8895 34.04C74.5362 35.4167 72.6345 36.105 70.1845 36.105ZM74.5945 7.93C73.3812 7.93 72.4012 7.59166 71.6545 6.915C70.9078 6.23833 70.5345 5.39833 70.5345 4.395C70.5345 3.39167 70.9078 2.55167 71.6545 1.875C72.4012 1.19833 73.3812 0.859999 74.5945 0.859999C75.8078 0.859999 76.7878 1.18667 77.5345 1.84C78.2812 2.47 78.6545 3.28667 78.6545 4.29C78.6545 5.34 78.2812 6.215 77.5345 6.915C76.8112 7.59166 75.8312 7.93 74.5945 7.93ZM90.1804 29.315C88.6404 29.315 87.2521 29.0117 86.0154 28.405C84.8021 27.7983 83.8454 26.8533 83.1454 25.57C82.4688 24.2633 82.1304 22.6183 82.1304 20.635V10.03H88.7804V19.55C88.7804 21.02 89.0488 22.07 89.5854 22.7C90.1454 23.33 90.9271 23.645 91.9304 23.645C92.5838 23.645 93.1788 23.4933 93.7154 23.19C94.2521 22.8867 94.6838 22.4083 95.0104 21.755C95.3371 21.0783 95.5004 20.215 95.5004 19.165V10.03H102.15V29H95.8154V23.645L97.0404 25.15C96.3871 26.55 95.4421 27.6 94.2054 28.3C92.9688 28.9767 91.6271 29.315 90.1804 29.315ZM115.709 36.105C113.889 36.105 112.15 35.895 110.494 35.475C108.86 35.055 107.46 34.4367 106.294 33.62L108.709 28.965C109.502 29.595 110.482 30.085 111.649 30.435C112.839 30.8083 113.994 30.995 115.114 30.995C116.91 30.995 118.205 30.5983 118.999 29.805C119.792 29.035 120.189 27.9033 120.189 26.41V24.17L120.539 18.85L120.504 13.495V10.03H126.839V25.535C126.839 29.1283 125.87 31.7883 123.934 33.515C121.997 35.2417 119.255 36.105 115.709 36.105ZM114.554 28.02C112.874 28.02 111.322 27.6467 109.899 26.9C108.499 26.13 107.367 25.0683 106.504 23.715C105.664 22.3383 105.244 20.7167 105.244 18.85C105.244 16.9833 105.664 15.3733 106.504 14.02C107.367 12.6433 108.499 11.5817 109.899 10.835C111.322 10.0883 112.874 9.715 114.554 9.715C116.164 9.715 117.54 10.0417 118.684 10.695C119.827 11.325 120.69 12.3167 121.274 13.67C121.88 15.0233 122.184 16.75 122.184 18.85C122.184 20.95 121.88 22.6767 121.274 24.03C120.69 25.3833 119.827 26.3867 118.684 27.04C117.54 27.6933 116.164 28.02 114.554 28.02ZM116.129 22.735C116.922 22.735 117.622 22.5717 118.229 22.245C118.859 21.9183 119.349 21.4633 119.699 20.88C120.072 20.2967 120.259 19.62 120.259 18.85C120.259 18.08 120.072 17.4033 119.699 16.82C119.349 16.2367 118.859 15.7933 118.229 15.49C117.622 15.1633 116.922 15 116.129 15C115.335 15 114.624 15.1633 113.994 15.49C113.364 15.7933 112.862 16.2367 112.489 16.82C112.139 17.4033 111.964 18.08 111.964 18.85C111.964 19.62 112.139 20.2967 112.489 20.88C112.862 21.4633 113.364 21.9183 113.994 22.245C114.624 22.5717 115.335 22.735 116.129 22.735Z"
                                fill="#333333"
                            />
                        </svg>
                    </Link>
                </div>
                <div className={styles.searchBarContainer}>
                    <SearchBar />
                </div>

                <div className={styles.authenticationContainer}>
                    <Button text={'log in'} color={'transparent'} callback={() => setIsSignUpOpen(true)}></Button>
                    {
                        isUserLogged ? <Button text={'Sign in'} callback={() => setIsSignUpOpen(true)}></Button>
                        : <p>HELLO</p>
                    }
                </div>
                <div className={`${styles.linksContainer}`}>
                    <Link href={'/exercises'}>exercises</Link>
                    <Link href={'/lessons'}>lessons</Link>
                </div>
            </nav>
            {/* <Sidebar isOpen={isSidebarOpen} /> */}
            <ModalExercises
                text={''}
                open={isSignUpOpen}
                background={'dark'}
                // ref={refModalLesson}
                callbackClose={closeModal}
                isSignUp={true}
                padding={'paddingBase'}
            >
                <Logging></Logging>
            </ModalExercises>
        </Fragment>
    )
}